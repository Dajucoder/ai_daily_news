# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨å¯¹ AI Daily News é¡¹ç›®çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä»£ç ã€æ–‡æ¡£ã€æµ‹è¯•ã€åé¦ˆå’Œå»ºè®®ã€‚

## ğŸ“‹ ç›®å½•

- [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™)
- [å¦‚ä½•è´¡çŒ®](#å¦‚ä½•è´¡çŒ®)
- [å¼€å‘ç¯å¢ƒè®¾ç½®](#å¼€å‘ç¯å¢ƒè®¾ç½®)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [æäº¤è§„èŒƒ](#æäº¤è§„èŒƒ)
- [Pull Request æµç¨‹](#pull-request-æµç¨‹)
- [é—®é¢˜æŠ¥å‘Š](#é—®é¢˜æŠ¥å‘Š)
- [åŠŸèƒ½è¯·æ±‚](#åŠŸèƒ½è¯·æ±‚)
- [å¼€å‘æœ€ä½³å®è·µ](#å¼€å‘æœ€ä½³å®è·µ)
- [è·å–å¸®åŠ©](#è·å–å¸®åŠ©)

## ğŸ¤ è¡Œä¸ºå‡†åˆ™

### æˆ‘ä»¬çš„æ‰¿è¯º

ä¸ºäº†è¥é€ ä¸€ä¸ªå¼€æ”¾å’Œå‹å¥½çš„ç¯å¢ƒï¼Œæˆ‘ä»¬ä½œä¸ºè´¡çŒ®è€…å’Œç»´æŠ¤è€…æ‰¿è¯ºï¼Œæ— è®ºå¹´é¾„ã€ä½“å‹ã€æ®‹ç–¾ã€ç§æ—ã€æ€§åˆ«è®¤åŒå’Œè¡¨è¾¾ã€ç»éªŒæ°´å¹³ã€æ•™è‚²ç¨‹åº¦ã€ç¤¾ä¼šç»æµåœ°ä½ã€å›½ç±ã€ä¸ªäººå½¢è±¡ã€ç§æ—ã€å®—æ•™æˆ–æ€§å–å‘å¦‚ä½•ï¼Œå‚ä¸æˆ‘ä»¬é¡¹ç›®å’Œç¤¾åŒºçš„æ¯ä¸ªäººéƒ½èƒ½è·å¾—æ— éªšæ‰°çš„ä½“éªŒã€‚

### æˆ‘ä»¬çš„æ ‡å‡†

æœ‰åŠ©äºåˆ›é€ ç§¯æç¯å¢ƒçš„è¡Œä¸ºåŒ…æ‹¬ï¼š
- ä½¿ç”¨å‹å¥½å’ŒåŒ…å®¹çš„è¯­è¨€
- å°Šé‡ä¸åŒçš„è§‚ç‚¹å’Œç»éªŒ
- ä¼˜é›…åœ°æ¥å—å»ºè®¾æ€§æ‰¹è¯„
- å…³æ³¨å¯¹ç¤¾åŒºæœ€æœ‰åˆ©çš„äº‹æƒ…
- å¯¹å…¶ä»–ç¤¾åŒºæˆå‘˜è¡¨ç¤ºåŒç†å¿ƒ

## ğŸš€ å¦‚ä½•è´¡çŒ®

### è´¡çŒ®ç±»å‹

æˆ‘ä»¬æ¬¢è¿ä»¥ä¸‹ç±»å‹çš„è´¡çŒ®ï¼š

1. **ä»£ç è´¡çŒ®**
   - æ–°åŠŸèƒ½å¼€å‘
   - Bugä¿®å¤
   - æ€§èƒ½ä¼˜åŒ–
   - ä»£ç é‡æ„
   - æµ‹è¯•ç”¨ä¾‹ç¼–å†™

2. **æ–‡æ¡£è´¡çŒ®**
   - APIæ–‡æ¡£å®Œå–„
   - ä½¿ç”¨æŒ‡å—ç¼–å†™
   - ä»£ç æ³¨é‡Šæ”¹è¿›
   - ç¿»è¯‘å·¥ä½œ
   - å¼€å‘æ–‡æ¡£æ›´æ–°

3. **æµ‹è¯•è´¡çŒ®**
   - å•å…ƒæµ‹è¯•ç¼–å†™
   - é›†æˆæµ‹è¯•å®Œå–„
   - æ€§èƒ½æµ‹è¯•
   - ç”¨æˆ·ä½“éªŒæµ‹è¯•
   - ç«¯åˆ°ç«¯æµ‹è¯•

4. **å…¶ä»–è´¡çŒ®**
   - é—®é¢˜æŠ¥å‘Š
   - åŠŸèƒ½å»ºè®®
   - è®¾è®¡æ”¹è¿›
   - ç¤¾åŒºæ”¯æŒ
   - æ€§èƒ½ä¼˜åŒ–å»ºè®®

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒè®¾ç½®

### å‰ç½®è¦æ±‚

- Python 3.12+
- Node.js 18+
- Git 2.30+
- Docker 20.0+ & Docker Compose 2.0
- PostgreSQL 15+ (å¯é€‰ï¼Œå¼€å‘ç¯å¢ƒå¯ä½¿ç”¨SQLite)
- Redis 7.0+ (å¯é€‰ï¼Œç”¨äºç¼“å­˜å’Œä»»åŠ¡é˜Ÿåˆ—)

### ç¯å¢ƒæ­å»º

1. **Fork å¹¶å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/your-username/ai_daily_news.git
cd ai_daily_news
```

2. **è®¾ç½®å¼€å‘ç¯å¢ƒï¼ˆæ¨èä½¿ç”¨Dockerï¼‰**
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡
cp .env.example .env
cp ai-news-agent/.env.example ai-news-agent/.env
cp frontend/.env.example frontend/.env

# ä½¿ç”¨Dockerå¿«é€Ÿå¯åŠ¨å¼€å‘ç¯å¢ƒ
docker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d

# ç­‰å¾…æœåŠ¡å¯åŠ¨å®Œæˆ
docker-compose ps
```

3. **æ‰‹åŠ¨ç¯å¢ƒè®¾ç½®**

**åç«¯ç¯å¢ƒ**
```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt

# æ•°æ®åº“è¿ç§»
python manage.py migrate
python manage.py createsuperuser

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python manage.py runserver 0.0.0.0:8000
```

**å‰ç«¯ç¯å¢ƒ**
```bash
cd frontend
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm start
```

**AIä»£ç†ç¯å¢ƒ**
```bash
cd ai-news-agent
pip install -r requirements.txt

# å¯åŠ¨AIä»£ç†æœåŠ¡
python start.py
```

### å¼€å‘æœåŠ¡å¯åŠ¨

```bash
# ä½¿ç”¨Dockerå¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose -f docker-compose.dev.yml up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f backend
docker-compose logs -f frontend
docker-compose logs -f ai-news-agent

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down
```

### æ•°æ®åº“è®¾ç½®

**SQLite (å¼€å‘ç¯å¢ƒ)**
```bash
# é»˜è®¤ä½¿ç”¨SQLiteï¼Œæ— éœ€é¢å¤–é…ç½®
python manage.py migrate
```

**PostgreSQL (ç”Ÿäº§ç¯å¢ƒ)**
```bash
# å®‰è£…PostgreSQL
# Ubuntu/Debian
sudo apt-get install postgresql postgresql-contrib

# macOS
brew install postgresql

# åˆ›å»ºæ•°æ®åº“
sudo -u postgres createdb ai_news
sudo -u postgres createuser --interactive

# æ›´æ–°ç¯å¢ƒå˜é‡
DATABASE_URL=postgresql://username:password@localhost:5432/ai_news
```

## ğŸ“ ä»£ç è§„èŒƒ

### Python ä»£ç è§„èŒƒ

æˆ‘ä»¬éµå¾ª PEP 8 æ ‡å‡†ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹å·¥å…·ï¼š

```bash
# å®‰è£…å¼€å‘å·¥å…·
pip install black flake8 isort mypy pre-commit

# é…ç½®pre-commité’©å­
pre-commit install

# ä»£ç æ ¼å¼åŒ–
black .
isort .

# ä»£ç æ£€æŸ¥
flake8 .
mypy .

# è¿è¡Œæ‰€æœ‰æ£€æŸ¥
pre-commit run --all-files
```

**ä»£ç é£æ ¼è¦ç‚¹ï¼š**
- ä½¿ç”¨ 4 ä¸ªç©ºæ ¼ç¼©è¿›
- è¡Œé•¿åº¦é™åˆ¶ä¸º 88 å­—ç¬¦
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œå‡½æ•°å
- æ·»åŠ é€‚å½“çš„ç±»å‹æ³¨è§£
- ç¼–å†™æ¸…æ™°çš„æ–‡æ¡£å­—ç¬¦ä¸²
- éµå¾ªDjangoæœ€ä½³å®è·µ

**ç¤ºä¾‹ï¼š**
```python
from typing import List, Optional, Dict, Any
from django.db import models
from django.utils import timezone
from django.core.exceptions import ValidationError

class NewsArticle(models.Model):
    """æ–°é—»æ–‡ç« æ¨¡å‹
    
    ç”¨äºå­˜å‚¨ä»RSSæºè·å–çš„æ–°é—»æ–‡ç« ä¿¡æ¯ã€‚
    
    Attributes:
        title: æ–‡ç« æ ‡é¢˜ï¼Œæœ€å¤§é•¿åº¦200å­—ç¬¦
        content: æ–‡ç« å†…å®¹ï¼Œæ”¯æŒHTMLæ ¼å¼
        published_at: å‘å¸ƒæ—¶é—´ï¼Œè‡ªåŠ¨è®¾ç½®ä¸ºåˆ›å»ºæ—¶é—´
        source: æ–°é—»æ¥æº
        category: æ–°é—»åˆ†ç±»
        is_active: æ˜¯å¦æ¿€æ´»çŠ¶æ€
    """
    
    title: str = models.CharField(
        max_length=200, 
        help_text="æ–‡ç« æ ‡é¢˜",
        db_index=True
    )
    content: str = models.TextField(help_text="æ–‡ç« å†…å®¹")
    published_at: models.DateTimeField = models.DateTimeField(
        default=timezone.now,
        help_text="å‘å¸ƒæ—¶é—´"
    )
    source: str = models.CharField(
        max_length=100,
        help_text="æ–°é—»æ¥æº"
    )
    category: str = models.CharField(
        max_length=50,
        choices=[
            ('technology', 'æŠ€æœ¯'),
            ('business', 'å•†ä¸š'),
            ('politics', 'æ”¿æ²»'),
            ('sports', 'ä½“è‚²'),
        ],
        default='technology'
    )
    is_active: bool = models.BooleanField(
        default=True,
        help_text="æ˜¯å¦æ¿€æ´»çŠ¶æ€"
    )
    
    class Meta:
        """æ¨¡å‹å…ƒæ•°æ®"""
        db_table = 'news_articles'
        ordering = ['-published_at']
        indexes = [
            models.Index(fields=['category', 'published_at']),
            models.Index(fields=['source', 'published_at']),
        ]
        verbose_name = 'æ–°é—»æ–‡ç« '
        verbose_name_plural = 'æ–°é—»æ–‡ç« '
    
    def __str__(self) -> str:
        """è¿”å›æ¨¡å‹çš„å­—ç¬¦ä¸²è¡¨ç¤º"""
        return f"{self.title} - {self.source}"
    
    def get_summary(self, max_length: int = 100) -> str:
        """è·å–æ–‡ç« æ‘˜è¦
        
        Args:
            max_length: æ‘˜è¦æœ€å¤§é•¿åº¦ï¼Œé»˜è®¤100å­—ç¬¦
            
        Returns:
            æ–‡ç« æ‘˜è¦å­—ç¬¦ä¸²
            
        Raises:
            ValueError: å½“max_lengthå°äºç­‰äº0æ—¶
        """
        if max_length <= 0:
            raise ValueError("max_lengthå¿…é¡»å¤§äº0")
            
        if len(self.content) <= max_length:
            return self.content
        return f"{self.content[:max_length]}..."
    
    def clean(self) -> None:
        """æ¨¡å‹éªŒè¯"""
        if len(self.title.strip()) == 0:
            raise ValidationError("æ ‡é¢˜ä¸èƒ½ä¸ºç©º")
        
        if len(self.content.strip()) == 0:
            raise ValidationError("å†…å®¹ä¸èƒ½ä¸ºç©º")
    
    def save(self, *args: Any, **kwargs: Any) -> None:
        """ä¿å­˜å‰çš„å¤„ç†"""
        self.clean()
        super().save(*args, **kwargs)
```

### JavaScript/TypeScript ä»£ç è§„èŒƒ

æˆ‘ä»¬ä½¿ç”¨ ESLintã€Prettier å’Œ TypeScript è¿›è¡Œä»£ç è§„èŒƒåŒ–ï¼š

```bash
# å®‰è£…å¼€å‘å·¥å…·
npm install --save-dev eslint prettier @typescript-eslint/parser @typescript-eslint/eslint-plugin

# ä»£ç æ ¼å¼åŒ–
npm run format

# ä»£ç æ£€æŸ¥
npm run lint

# ç±»å‹æ£€æŸ¥
npm run type-check
```

**ä»£ç é£æ ¼è¦ç‚¹ï¼š**
- ä½¿ç”¨ 2 ä¸ªç©ºæ ¼ç¼©è¿›
- ä½¿ç”¨åˆ†å·ç»“å°¾
- ä¼˜å…ˆä½¿ç”¨ constï¼Œå…¶æ¬¡ let
- ä½¿ç”¨ TypeScript ç±»å‹æ³¨è§£
- ç»„ä»¶ä½¿ç”¨ PascalCase å‘½å
- ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶å’ŒHooks
- éµå¾ªReactæœ€ä½³å®è·µ

**ç¤ºä¾‹ï¼š**
```typescript
import React, { useState, useEffect, useCallback, useMemo } from 'react';
import { Button, Card, Typography, Tag, Space, Tooltip } from 'antd';
import { EyeOutlined, LikeOutlined, ShareAltOutlined } from '@ant-design/icons';
import type { NewsItem, Category } from '@/types';

interface NewsItemProps {
  /** æ–°é—»é¡¹ç›®æ•°æ® */
  news: NewsItem;
  /** æ˜¯å¦æ˜¾ç¤ºå®Œæ•´å†…å®¹ */
  showFullContent?: boolean;
  /** ç‚¹å‡»äº‹ä»¶å›è°ƒ */
  onItemClick?: (news: NewsItem) => void;
  /** ç‚¹èµäº‹ä»¶å›è°ƒ */
  onLike?: (newsId: number) => void;
  /** åˆ†äº«äº‹ä»¶å›è°ƒ */
  onShare?: (news: NewsItem) => void;
}

const NewsItem: React.FC<NewsItemProps> = ({ 
  news, 
  showFullContent = false,
  onItemClick,
  onLike,
  onShare
}) => {
  const [isExpanded, setIsExpanded] = useState<boolean>(false);
  const [likeCount, setLikeCount] = useState<number>(news.likeCount || 0);
  
  // å¤„ç†å±•å¼€/æ”¶èµ·
  const handleToggleExpand = useCallback((): void => {
    setIsExpanded(!isExpanded);
  }, [isExpanded]);
  
  // å¤„ç†ç‚¹èµ
  const handleLike = useCallback((): void => {
    if (onLike) {
      onLike(news.id);
      setLikeCount(prev => prev + 1);
    }
  }, [news.id, onLike]);
  
  // å¤„ç†åˆ†äº«
  const handleShare = useCallback((): void => {
    if (onShare) {
      onShare(news);
    }
  }, [news, onShare]);
  
  // å¤„ç†ç‚¹å‡»
  const handleClick = useCallback((): void => {
    if (onItemClick) {
      onItemClick(news);
    }
  }, [news, onItemClick]);
  
  // è®¡ç®—æ˜¾ç¤ºå†…å®¹
  const displayContent = useMemo((): string => {
    if (showFullContent || isExpanded) {
      return news.content;
    }
    return news.content.length > 200 
      ? `${news.content.substring(0, 200)}...` 
      : news.content;
  }, [news.content, showFullContent, isExpanded]);
  
  // æ ¼å¼åŒ–å‘å¸ƒæ—¶é—´
  const formattedTime = useMemo((): string => {
    const date = new Date(news.publishedAt);
    return date.toLocaleDateString('zh-CN', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  }, [news.publishedAt]);
  
  return (
    <Card 
      hoverable
      className="news-item-card"
      onClick={handleClick}
    >
      <div className="news-header">
        <Typography.Title level={4} className="news-title">
          {news.title}
        </Typography.Title>
        <Space size="small">
          <Tag color="blue">{news.category}</Tag>
          <Typography.Text type="secondary" className="news-time">
            {formattedTime}
          </Typography.Text>
        </Space>
      </div>
      
      <div className="news-content">
        <Typography.Paragraph 
          ellipsis={!showFullContent && !isExpanded}
          className="news-text"
        >
          {displayContent}
        </Typography.Paragraph>
        
        {!showFullContent && news.content.length > 200 && (
          <Button 
            type="link" 
            onClick={handleToggleExpand}
            className="expand-button"
          >
            {isExpanded ? 'æ”¶èµ·' : 'å±•å¼€'}
          </Button>
        )}
      </div>
      
      <div className="news-footer">
        <Space size="middle">
          <Tooltip title="æŸ¥çœ‹">
            <Button 
              type="text" 
              icon={<EyeOutlined />}
              className="action-button"
            />
          </Tooltip>
          
          <Tooltip title="ç‚¹èµ">
            <Button 
              type="text" 
              icon={<LikeOutlined />}
              onClick={handleLike}
              className="action-button"
            >
              {likeCount}
            </Button>
          </Tooltip>
          
          <Tooltip title="åˆ†äº«">
            <Button 
              type="text" 
              icon={<ShareAltOutlined />}
              onClick={handleShare}
              className="action-button"
            />
          </Tooltip>
        </Space>
        
        <Typography.Text type="secondary" className="news-source">
          æ¥æº: {news.source}
        </Typography.Text>
      </div>
    </Card>
  );
};

export default NewsItem;
```

### Django ç‰¹å®šè§„èŒƒ

**æ¨¡å‹è®¾è®¡**
```python
# ä½¿ç”¨æœ‰æ„ä¹‰çš„å­—æ®µåå’Œå…³ç³»
class RSSSource(models.Model):
    name = models.CharField(max_length=100, verbose_name="æºåç§°")
    url = models.URLField(verbose_name="RSSåœ°å€")
    category = models.CharField(max_length=50, verbose_name="åˆ†ç±»")
    is_active = models.BooleanField(default=True, verbose_name="æ˜¯å¦æ¿€æ´»")
    last_fetch = models.DateTimeField(null=True, blank=True, verbose_name="æœ€åè·å–æ—¶é—´")
    
    class Meta:
        verbose_name = "RSSæº"
        verbose_name_plural = "RSSæº"
        ordering = ['name']
        unique_together = ['url', 'category']
    
    def __str__(self):
        return f"{self.name} ({self.category})"
    
    def clean(self):
        """éªŒè¯RSSæº"""
        if not self.url.startswith(('http://', 'https://')):
            raise ValidationError("URLå¿…é¡»ä»¥http://æˆ–https://å¼€å¤´")
    
    def get_fetch_status(self):
        """è·å–è·å–çŠ¶æ€"""
        if not self.last_fetch:
            return "ä»æœªè·å–"
        
        time_diff = timezone.now() - self.last_fetch
        if time_diff.days > 1:
            return "éœ€è¦æ›´æ–°"
        return "æ­£å¸¸"
```

**è§†å›¾è®¾è®¡**
```python
from rest_framework import viewsets, status
from rest_framework.decorators import action
from rest_framework.response import Response
from rest_framework.permissions import IsAuthenticated
from django_filters import rest_framework as filters

class NewsViewSet(viewsets.ModelViewSet):
    """æ–°é—»è§†å›¾é›†"""
    queryset = NewsArticle.objects.filter(is_active=True)
    serializer_class = NewsArticleSerializer
    permission_classes = [IsAuthenticated]
    filter_backends = [filters.DjangoFilterBackend]
    filterset_fields = ['category', 'source', 'published_at']
    
    @action(detail=False, methods=['post'])
    def fetch_latest(self, request):
        """æ‰‹åŠ¨è·å–æœ€æ–°æ–°é—»"""
        try:
            # æ‰§è¡Œæ–°é—»è·å–é€»è¾‘
            fetched_count = self.perform_fetch()
            return Response({
                'message': f'æˆåŠŸè·å– {fetched_count} æ¡æ–°é—»',
                'fetched_count': fetched_count
            })
        except Exception as e:
            return Response({
                'error': str(e)
            }, status=status.HTTP_500_INTERNAL_SERVER_ERROR)
    
    def perform_fetch(self):
        """æ‰§è¡Œæ–°é—»è·å–"""
        # å®ç°è·å–é€»è¾‘
        pass
```

## ğŸ“‹ æäº¤è§„èŒƒ

æˆ‘ä»¬ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

### æäº¤æ¶ˆæ¯æ ¼å¼

```
<type>(<scope>): <description>

[optional body]

[optional footer(s)]
```

### ç±»å‹è¯´æ˜

- `feat`: æ–°åŠŸèƒ½
- `fix`: Bugä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor`: ä»£ç é‡æ„
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
- `ci`: CI/CDç›¸å…³
- `build`: æ„å»ºç³»ç»Ÿç›¸å…³

### ä½œç”¨åŸŸè¯´æ˜

- `backend`: åç«¯ç›¸å…³
- `frontend`: å‰ç«¯ç›¸å…³
- `agent`: AIä»£ç†ç›¸å…³
- `docs`: æ–‡æ¡£ç›¸å…³
- `docker`: Dockeré…ç½®ç›¸å…³
- `api`: APIç›¸å…³
- `ui`: ç”¨æˆ·ç•Œé¢ç›¸å…³
- `db`: æ•°æ®åº“ç›¸å…³

### æäº¤ç¤ºä¾‹

```bash
feat(backend): add RSS source management API
fix(frontend): resolve chat streaming display issue
docs(readme): update installation instructions
style(backend): format code with black
refactor(agent): optimize news fetching logic
perf(frontend): improve component rendering performance
test(backend): add unit tests for news models
chore(docker): update docker-compose configuration
ci(github): add automated testing workflow
build(frontend): upgrade to Vite 5.0
```

## ğŸ”„ Pull Request æµç¨‹

### 1. å‡†å¤‡å·¥ä½œ

- ç¡®ä¿ä½ çš„ fork æ˜¯æœ€æ–°çš„
- åˆ›å»ºä¸€ä¸ªæè¿°æ€§çš„åˆ†æ”¯å

```bash
git checkout main
git pull upstream main
git checkout -b feature/add-news-analytics
```

### 2. å¼€å‘è¿‡ç¨‹

- éµå¾ªä»£ç è§„èŒƒ
- ç¼–å†™æˆ–æ›´æ–°æµ‹è¯•
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
- æ›´æ–°ç›¸å…³æ–‡æ¡£

```bash
# è¿è¡Œæµ‹è¯•
cd backend && python manage.py test
cd frontend && npm test

# æ£€æŸ¥ä»£ç è§„èŒƒ
black . && flake8 .
npm run lint

# ç±»å‹æ£€æŸ¥
mypy .
npm run type-check
```

### 3. æäº¤æ›´æ”¹

```bash
git add .
git commit -m "feat(analytics): add news reading analytics dashboard"
git push origin feature/add-news-analytics
```

### 4. åˆ›å»º Pull Request

åœ¨ GitHub ä¸Šåˆ›å»º PR æ—¶ï¼Œè¯·ï¼š

- ä½¿ç”¨æ¸…æ™°çš„æ ‡é¢˜å’Œæè¿°
- å¼•ç”¨ç›¸å…³çš„ Issue
- æ·»åŠ é€‚å½“çš„æ ‡ç­¾
- è¯·æ±‚ä»£ç å®¡æŸ¥

**PR æ¨¡æ¿ï¼š**
```markdown
## å˜æ›´æè¿°
ç®€è¦æè¿°è¿™ä¸ªPRçš„ç›®çš„å’Œå®ç°çš„åŠŸèƒ½ã€‚

## å˜æ›´ç±»å‹
- [ ] Bugä¿®å¤
- [ ] æ–°åŠŸèƒ½
- [ ] ä»£ç é‡æ„
- [ ] æ–‡æ¡£æ›´æ–°
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æµ‹è¯•ç›¸å…³
- [ ] å…¶ä»–

## æµ‹è¯•
- [ ] å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ‰‹åŠ¨æµ‹è¯•å®Œæˆ
- [ ] ä»£ç è§„èŒƒæ£€æŸ¥é€šè¿‡

## ç›¸å…³Issue
Closes #123

## æˆªå›¾ï¼ˆå¦‚é€‚ç”¨ï¼‰
æ·»åŠ ç›¸å…³æˆªå›¾å±•ç¤ºå˜æ›´æ•ˆæœã€‚

## æ£€æŸ¥æ¸…å•
- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] è‡ªæˆ‘å®¡æŸ¥äº†ä»£ç 
- [ ] æ·»åŠ äº†å¿…è¦çš„æ³¨é‡Š
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æ²¡æœ‰å¼•å…¥æ–°çš„è­¦å‘Š
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] ä»£ç æ ¼å¼åŒ–å®Œæˆ
```

### 5. ä»£ç å®¡æŸ¥

- ç§¯æå“åº”å®¡æŸ¥æ„è§
- åŠæ—¶ä¿®å¤å‘ç°çš„é—®é¢˜
- ä¿æŒå‹å¥½çš„æ²Ÿé€šæ€åº¦
- éµå¾ªå®¡æŸ¥åé¦ˆè¿›è¡Œæ”¹è¿›

## ğŸ› é—®é¢˜æŠ¥å‘Š

### æŠ¥å‘Š Bug

ä½¿ç”¨ GitHub Issues æŠ¥å‘Š Bugï¼Œè¯·åŒ…å«ï¼š

1. **Bug æè¿°**ï¼šæ¸…æ™°ç®€æ´çš„æè¿°
2. **å¤ç°æ­¥éª¤**ï¼šè¯¦ç»†çš„æ“ä½œæ­¥éª¤
3. **é¢„æœŸè¡Œä¸º**ï¼šåº”è¯¥å‘ç”Ÿä»€ä¹ˆ
4. **å®é™…è¡Œä¸º**ï¼šå®é™…å‘ç”Ÿäº†ä»€ä¹ˆ
5. **ç¯å¢ƒä¿¡æ¯**ï¼šæ“ä½œç³»ç»Ÿã€æµè§ˆå™¨ã€ç‰ˆæœ¬ç­‰
6. **æˆªå›¾/æ—¥å¿—**ï¼šç›¸å…³çš„é”™è¯¯ä¿¡æ¯

**Bug æŠ¥å‘Šæ¨¡æ¿ï¼š**
```markdown
## Bug æè¿°
ç®€è¦æè¿°é‡åˆ°çš„é—®é¢˜ã€‚

## å¤ç°æ­¥éª¤
1. è¿›å…¥ '...'
2. ç‚¹å‡» '....'
3. æ»šåŠ¨åˆ° '....'
4. çœ‹åˆ°é”™è¯¯

## é¢„æœŸè¡Œä¸º
æ¸…æ™°ç®€æ´åœ°æè¿°ä½ æœŸæœ›å‘ç”Ÿä»€ä¹ˆã€‚

## å®é™…è¡Œä¸º
æ¸…æ™°ç®€æ´åœ°æè¿°å®é™…å‘ç”Ÿäº†ä»€ä¹ˆã€‚

## æˆªå›¾
å¦‚æœé€‚ç”¨ï¼Œæ·»åŠ æˆªå›¾æ¥å¸®åŠ©è§£é‡Šä½ çš„é—®é¢˜ã€‚

## ç¯å¢ƒä¿¡æ¯
- æ“ä½œç³»ç»Ÿ: [e.g. macOS 12.0]
- æµè§ˆå™¨: [e.g. Chrome 95.0]
- é¡¹ç›®ç‰ˆæœ¬: [e.g. v1.0.0]
- Pythonç‰ˆæœ¬: [e.g. 3.12.0]
- Node.jsç‰ˆæœ¬: [e.g. 18.0.0]

## é™„åŠ ä¿¡æ¯
æ·»åŠ ä»»ä½•å…¶ä»–å…³äºé—®é¢˜çš„ä¿¡æ¯ã€‚
```

## ğŸ’¡ åŠŸèƒ½è¯·æ±‚

### æå‡ºæ–°åŠŸèƒ½

ä½¿ç”¨ GitHub Issues æå‡ºåŠŸèƒ½è¯·æ±‚ï¼Œè¯·åŒ…å«ï¼š

1. **åŠŸèƒ½æè¿°**ï¼šè¯¦ç»†æè¿°å»ºè®®çš„åŠŸèƒ½
2. **ä½¿ç”¨åœºæ™¯**ï¼šè§£é‡Šä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½
3. **è§£å†³æ–¹æ¡ˆ**ï¼šæè¿°ä½ å¸Œæœ›çš„å®ç°æ–¹å¼
4. **æ›¿ä»£æ–¹æ¡ˆ**ï¼šè€ƒè™‘è¿‡çš„å…¶ä»–è§£å†³æ–¹æ¡ˆ
5. **é™„åŠ ä¿¡æ¯**ï¼šä»»ä½•å…¶ä»–ç›¸å…³ä¿¡æ¯

**åŠŸèƒ½è¯·æ±‚æ¨¡æ¿ï¼š**
```markdown
## åŠŸèƒ½æè¿°
æ¸…æ™°ç®€æ´åœ°æè¿°ä½ æƒ³è¦çš„åŠŸèƒ½ã€‚

## ä½¿ç”¨åœºæ™¯
æè¿°è¿™ä¸ªåŠŸèƒ½è§£å†³çš„é—®é¢˜æˆ–æ”¹è¿›çš„ä½“éªŒã€‚

## å»ºè®®çš„è§£å†³æ–¹æ¡ˆ
æè¿°ä½ å¸Œæœ›çš„å®ç°æ–¹å¼ã€‚

## æ›¿ä»£æ–¹æ¡ˆ
æè¿°ä½ è€ƒè™‘è¿‡çš„å…¶ä»–è§£å†³æ–¹æ¡ˆã€‚

## é™„åŠ ä¿¡æ¯
æ·»åŠ ä»»ä½•å…¶ä»–å…³äºåŠŸèƒ½è¯·æ±‚çš„ä¿¡æ¯ã€æˆªå›¾æˆ–ç¤ºä¾‹ã€‚
```

## ğŸ·ï¸ æ ‡ç­¾ç³»ç»Ÿ

æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹æ ‡ç­¾æ¥åˆ†ç±» Issues å’Œ PRsï¼š

### ç±»å‹æ ‡ç­¾
- `bug`: BugæŠ¥å‘Š
- `enhancement`: åŠŸèƒ½å¢å¼º
- `feature`: æ–°åŠŸèƒ½
- `documentation`: æ–‡æ¡£ç›¸å…³
- `question`: é—®é¢˜å’¨è¯¢
- `performance`: æ€§èƒ½ç›¸å…³
- `security`: å®‰å…¨ç›¸å…³

### ä¼˜å…ˆçº§æ ‡ç­¾
- `priority/high`: é«˜ä¼˜å…ˆçº§
- `priority/medium`: ä¸­ä¼˜å…ˆçº§
- `priority/low`: ä½ä¼˜å…ˆçº§

### çŠ¶æ€æ ‡ç­¾
- `status/in-progress`: è¿›è¡Œä¸­
- `status/needs-review`: éœ€è¦å®¡æŸ¥
- `status/blocked`: è¢«é˜»å¡
- `status/ready`: å‡†å¤‡å°±ç»ª
- `status/testing`: æµ‹è¯•ä¸­

### ç»„ä»¶æ ‡ç­¾
- `component/backend`: åç«¯ç›¸å…³
- `component/frontend`: å‰ç«¯ç›¸å…³
- `component/agent`: AIä»£ç†ç›¸å…³
- `component/docs`: æ–‡æ¡£ç›¸å…³
- `component/api`: APIç›¸å…³
- `component/ui`: ç”¨æˆ·ç•Œé¢ç›¸å…³

## ğŸ¯ å¼€å‘æœ€ä½³å®è·µ

### 1. åˆ†æ”¯ç®¡ç†

- `main`: ä¸»åˆ†æ”¯ï¼Œä¿æŒç¨³å®š
- `develop`: å¼€å‘åˆ†æ”¯ï¼Œé›†æˆæ–°åŠŸèƒ½
- `feature/*`: åŠŸèƒ½åˆ†æ”¯
- `hotfix/*`: ç´§æ€¥ä¿®å¤åˆ†æ”¯
- `release/*`: å‘å¸ƒåˆ†æ”¯

### 2. æµ‹è¯•ç­–ç•¥

**åç«¯æµ‹è¯•**
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python manage.py test

# è¿è¡Œç‰¹å®šåº”ç”¨æµ‹è¯•
python manage.py test news

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
coverage run --source='.' manage.py test
coverage report
coverage html  # ç”ŸæˆHTMLæŠ¥å‘Š

# è¿è¡Œæ€§èƒ½æµ‹è¯•
python manage.py test --settings=ai_news_backend.settings.test
```

**å‰ç«¯æµ‹è¯•**
```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
npm test

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# è¿è¡Œç±»å‹æ£€æŸ¥
npm run type-check
```

### 3. æ€§èƒ½è€ƒè™‘

- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- å‰ç«¯ç»„ä»¶æ‡’åŠ è½½
- APIå“åº”ç¼“å­˜
- å›¾ç‰‡å‹ç¼©ä¼˜åŒ–
- ä»£ç åˆ†å‰²å’ŒTree Shaking

### 4. å®‰å…¨æœ€ä½³å®è·µ

- è¾“å…¥éªŒè¯å’Œæ¸…ç†
- SQLæ³¨å…¥é˜²æŠ¤
- XSSæ”»å‡»é˜²æŠ¤
- CSRFä¿æŠ¤
- æ•æ„Ÿä¿¡æ¯åŠ å¯†
- æƒé™æ§åˆ¶
- APIé™æµ

### 5. ä»£ç è´¨é‡ä¿è¯

```bash
# å®‰è£…pre-commité’©å­
pip install pre-commit
pre-commit install

# è¿è¡Œæ‰€æœ‰æ£€æŸ¥
pre-commit run --all-files

# è‡ªåŠ¨ä¿®å¤
pre-commit run --all-files --hook-stage manual
```

### 6. æ•°æ®åº“æœ€ä½³å®è·µ

```python
# ä½¿ç”¨select_relatedå’Œprefetch_relatedä¼˜åŒ–æŸ¥è¯¢
class NewsViewSet(viewsets.ModelViewSet):
    def get_queryset(self):
        return NewsArticle.objects.select_related('source').prefetch_related('tags')
    
    # ä½¿ç”¨æ•°æ®åº“ç´¢å¼•
    class Meta:
        indexes = [
            models.Index(fields=['published_at']),
            models.Index(fields=['category', 'published_at']),
        ]
```

### 7. APIè®¾è®¡æœ€ä½³å®è·µ

```python
# ä½¿ç”¨åºåˆ—åŒ–å™¨éªŒè¯æ•°æ®
class NewsArticleSerializer(serializers.ModelSerializer):
    class Meta:
        model = NewsArticle
        fields = ['id', 'title', 'content', 'published_at', 'source', 'category']
        read_only_fields = ['id', 'published_at']
    
    def validate_title(self, value):
        if len(value.strip()) < 5:
            raise serializers.ValidationError("æ ‡é¢˜è‡³å°‘éœ€è¦5ä¸ªå­—ç¬¦")
        return value

# ä½¿ç”¨åˆ†é¡µ
class NewsViewSet(viewsets.ModelViewSet):
    pagination_class = StandardResultsSetPagination
    page_size = 20
    max_page_size = 100
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœä½ åœ¨è´¡çŒ®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–å¸®åŠ©ï¼š

1. **GitHub Issues**: æå‡ºé—®é¢˜æˆ–å»ºè®®
2. **GitHub Discussions**: å‚ä¸ç¤¾åŒºè®¨è®º
3. **é‚®ä»¶è”ç³»**: [your-email@example.com]
4. **å¾®ä¿¡ç¾¤**: æ‰«æäºŒç»´ç åŠ å…¥å¼€å‘è€…ç¾¤
5. **é¡¹ç›®æ–‡æ¡£**: æŸ¥çœ‹ [docs/](docs/) ç›®å½•ä¸‹çš„è¯¦ç»†æ–‡æ¡£

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼ä½ ä»¬çš„åŠªåŠ›è®©è¿™ä¸ªé¡¹ç›®å˜å¾—æ›´å¥½ã€‚

### è´¡çŒ®è€…åˆ—è¡¨

<!-- è¿™é‡Œä¼šè‡ªåŠ¨ç”Ÿæˆè´¡çŒ®è€…åˆ—è¡¨ -->

---

å†æ¬¡æ„Ÿè°¢ä½ çš„è´¡çŒ®ï¼è®©æˆ‘ä»¬ä¸€èµ·æ„å»ºæ›´å¥½çš„ AI Daily News ç³»ç»Ÿï¼